/**
* jQuery ligerUI 1.3.2
*
* http://ligerui.com
*
* Author daomi 2015 [ gd_star@163.com ]
*
*/
!function($){if(Function.prototype.ligerExtend=function(a,b){if("function"!=typeof a)return this;this.base=a.prototype,this.base.constructor=a;var c=function(){};c.prototype=a.prototype,this.prototype=new c,this.prototype.constructor=this,b&&$.extend(this.prototype,b)},Function.prototype.ligerDefer=function(a,b,c){var d=this;return setTimeout(function(){d.apply(a,c||[])},b)},window.liger=$.ligerui={version:"V1.3.2",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"liger",attrPrev:"data",getId:function(a){a=a||this.managerIdPrev;var b=a+(1e3+this.managerCount);return this.managerCount++,b},add:function(a){if(2==arguments.length){var b=arguments[1];return b.id=b.id||b.options.id||arguments[0].id,this.addManager(b),void 0}a.id||(a.id=this.getId(a.__idPrev())),this.managers[a.id]=a},remove:function(a){if("string"==typeof a||"number"==typeof a)delete liger.managers[a];else if("object"==typeof a)if(a instanceof liger.core.Component)delete liger.managers[a.id];else{if(!$(a).attr(this.idAttrName))return!1;delete liger.managers[$(a).attr(this.idAttrName)]}},get:function(a,b){var c,d;return b=b||"ligeruiid","string"==typeof a||"number"==typeof a?liger.managers[a]:"object"==typeof a?(c=a.length?a[0]:a,d=c[b]||$(c).attr(b),d?liger.managers[d]:null):null},find:function(a){var c,d,b=[];for(c in this.managers)d=this.managers[c],a instanceof Function?d instanceof a&&b.push(d):a instanceof Array?-1!=$.inArray(d.__getType(),a)&&b.push(d):d.__getType()==a&&b.push(d);return b},run:function(a,b,c){var d,e,f;if(a){if(c=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},c||{}),a=a.replace(/^ligerGet/,""),a=a.replace(/^liger/,""),null==this||this==window||c.isStatic)return liger.plugins[a]||(liger.plugins[a]={fn:$[liger.pluginPrev+a],isStatic:!0}),new $.ligerui[c.controlNamespace][a]($.extend({},$[c.defaultsNamespace][a]||{},$[c.defaultsNamespace][a+"String"]||{},b.length>0?b[0]:{}));if(liger.plugins[a]||(liger.plugins[a]={fn:$.fn[liger.pluginPrev+a],isStatic:!1}),/Manager$/.test(a))return liger.get(this,c.idAttrName);if(this.each(function(){var d,e,f;return this[c.idAttrName]||$(this).attr(c.idAttrName)?(d=liger.get(this[c.idAttrName]||$(this).attr(c.idAttrName)),d&&b.length>0&&d.set(b[0]),void 0):(b.length>=1&&"string"==typeof b[0]||(e=b.length>0?b[0]:null,f=$.extend({},$[c.defaultsNamespace][a],$[c.defaultsNamespace][a+"String"],e),c.propertyToElemnt&&(f[c.propertyToElemnt]=this),c.hasElement?new $.ligerui[c.controlNamespace][a](this,f):new $.ligerui[c.controlNamespace][a](f)),void 0)}),0==this.length)return null;if(0==b.length)return liger.get(this,c.idAttrName);if("object"==typeof b[0])return liger.get(this,c.idAttrName);if("string"==typeof b[0]){if(d=liger.get(this,c.idAttrName),null==d)return;if("option"!=b[0]){if(e=b[0],!d[e])return;return f=Array.apply(null,b),f.shift(),d[e].apply(d,f)}if(2==b.length)return d.get(b[1]);if(b.length>=3)return d.set(b[1],b[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},liger.defaults=$.ligerDefaults,liger.methods=$.ligerMethos,$.fn.liger=function(a){return a?liger.run.call(this,a,arguments):liger.get(this)},liger.core.Component=function(a){this.events=this.events||{},this.options=a||{},this.children={}},$.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(a,b,c){var d,e,f,g;if(a)if("object"!=typeof a){if(f=a,0==f.indexOf("on"))return"function"==typeof b&&this.bind(f.substr(2),b),void 0;this.options||(this.options={}),0!=this.trigger("propertychange",[a,b])&&(this.options[f]=b,g="_set"+f.substr(0,1).toUpperCase()+f.substr(1),this[g]&&this[g].call(this,b,c),this.trigger("propertychanged",[a,b]))}else{if(this.options!=a?($.extend(this.options,a),d=a):d=$.extend({},a),void 0==b||1==b)for(e in d)0==e.indexOf("on")&&this.set(e,d[e]);if(void 0==b||0==b)for(e in d)0!=e.indexOf("on")&&this.set(e,d[e],c)}},get:function(a){var b="_get"+a.substr(0,1).toUpperCase()+a.substr(1);return this[b]?this[b].call(this,a):this.options[a]},hasBind:function(a){var b=a.toLowerCase(),c=this.events[b];return c&&c.length?!0:!1},trigger:function(a,b){var c,d,e,f;if(a&&(c=a.toLowerCase(),d=this.events[c]))for(b=b||[],0==b instanceof Array&&(b=[b]),e=0;e<d.length;e++)if(f=d[e],0==f.handler.apply(f.context,b))return!1},bind:function(a,b,c){var d,e,f;if("object"!=typeof a){if("function"!=typeof b)return!1;e=a.toLowerCase(),f=this.events[e]||[],c=c||this,f.push({handler:b,context:c}),this.events[e]=f}else for(d in a)this.bind(d,a[d])},unbind:function(a,b){var c,d,e,f;if(!a)return this.events={},void 0;if(c=a.toLowerCase(),d=this.events[c],d&&d.length)if(b){for(e=0,f=d.length;f>e;e++)if(d[e].handler==b){d.splice(e,1);break}}else delete this.events[c]},destroy:function(){liger.remove(this)}}),liger.core.UIComponent=function(a,b){liger.core.UIComponent.base.constructor.call(this,b);var c=this._extendMethods();c&&$.extend(this,c),this.element=a,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},liger.core.UIComponent.ligerExtend(liger.core.Component,{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){function loadDataOp(a,b){var d,e,f,c={};if(!a||-1!=a.indexOf("."))return c;if(d=liger.defaults[a],!d)return c;for(e in d)b.attr(liger.attrPrev+"-"+e)&&(f=b.attr(liger.attrPrev+"-"+e),c[e]="boolean"==typeof d[e]?"true"==f||"1"==f:f);return c}var attributes,i,name,p,attroptions;if(this.type=this.__getType(),this.id=this.element?this.options.id||this.element.id||liger.getId(this.__idPrev()):this.options.id||liger.getId(this.__idPrev()),liger.add(this),this.element){if(attributes=this.attr(),attributes&&attributes instanceof Array)for(i=0;i<attributes.length;i++)name=attributes[i],$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name));if(p=this.options,$(this.element).attr("ligerui"))try{attroptions=$(this.element).attr("ligerui"),0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},_setCls:function(a){this.element&&a&&$(this.element).addClass(a)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,liger.remove(this)}}),liger.controls.Input=function(a,b){liger.controls.Input.base.constructor.call(this,a,b)},liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function(a){return this.set("value",a)},getValue:function(){return this.get("value")},_setReadonly:function(a){var c,b=this.wrapper||this.text;b&&b.hasClass("l-text")&&(c=this.inputText,a?(c&&c.attr("readonly","readonly"),b.addClass("l-text-readonly")):(c&&c.removeAttr("readonly"),b.removeClass("l-text-readonly")))},setReadonly:function(a){return this.set("readonly",a)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(a,b){this.set({width:a,height:b+2})}}),liger.win={top:!1,mask:function(){function b(){if(liger.win.windowMask){var a=$(window).height()+$(window).scrollTop();liger.win.windowMask.height(a)}}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",b),$(window).bind("scroll",b)),this.windowMask.show(),b(),this.masking=!0},unmask:function(a){var c,d,e,f,g,b=$("body > .l-dialog:visible,body > .l-window:visible");for(c=0,d=b.length;d>c;c++)if(e=b.eq(c).attr("ligeruiid"),(!a||a.id!=e)&&(f=liger.get(e),f&&(g=f.get("modal"))))return;this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var a=this;a.taskbar.animate({bottom:-32},function(){a.taskbar.remove(),a.taskbar=null})},activeTask:function(a){var b,c;for(b in this.tasks)c=this.tasks[b],b==a.id?c.addClass("l-taskbar-task-active"):c.removeClass("l-taskbar-task-active")},getTask:function(a){var b=this;if(b.taskbar)return b.tasks[a.id]?b.tasks[a.id]:null},addTask:function(a){var c,d,b=this;return b.taskbar||b.createTaskbar(),b.tasks[a.id]?b.tasks[a.id]:(c=a.get("title"),d=b.tasks[a.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+c+"</div></div>"),b.taskbar.tasks.append(d),b.activeTask(a),d.bind("click",function(){b.activeTask(a),a.actived?a.min():a.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),d)},hasTask:function(){for(var a in this.tasks)if(this.tasks[a])return!0;return!1},removeTask:function(a){var b=this;b.taskbar&&(b.tasks[a.id]&&(b.tasks[a.id].unbind(),b.tasks[a.id].remove(),delete b.tasks[a.id]),b.hasTask()||b.removeTaskbar())},setFront:function(a){var c,d,b=liger.find(liger.core.Win);for(c in b)d=b[c],d==a?($(d.element).css("z-index","9200"),this.activeTask(d)):$(d.element).css("z-index","9100")}},liger.core.Win=function(a,b){liger.core.Win.base.constructor.call(this,a,b)},liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){this.options.modal&&liger.win.mask(this)},unmask:function(){this.options.modal&&liger.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),liger.draggable={dragging:!1},liger.resizable={reszing:!1},liger.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(a){var e,f,g,h,i,j,k,b=function(a){return 10>a?"0"+a:a},c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d=function(a){return c.lastIndex=0,c.test(a)?'"'+a.replace(c,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'};if(null===a)return"null";if(e=typeof a,"undefined"===e)return void 0;if("string"===e)return d(a);if("number"===e||"boolean"===e)return""+a;if("object"===e){if("function"==typeof a.toJSON)return liger.toJSON(a.toJSON());if(a.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null;if(f=[],a.constructor===Array){for(g=0,h=a.length;h>g;g++)f.push(liger.toJSON(a[g])||"null");return"["+f.join(",")+"]"}for(k in a){if(e=typeof k,"number"===e)i='"'+k+'"';else{if("string"!==e)continue;i=d(k)}e=typeof a[k],"function"!==e&&"undefined"!==e&&(j=liger.toJSON(a[k]),f.push(i+":"+j))}return"{"+f.join(",")+"}"}},liger.getEditor=function(a){var e,f,b=a.type,c=a.control,d=a.master;return b?(e=0,c&&(c=c.substr(0,1).toUpperCase()+c.substr(1)),f={create:function(f,g,h){var n,o,p,q,r,s,t,u,v,i=g.field||g.column,j=h||{},k=g.column?!0:!1,l=$.extend({},a.options),m="text";return-1!=$.inArray(b,["password","file","checkbox","radio"])&&(m=b),a.password&&(m="password"),n=$("<input type='"+m+"'/>"),a.body&&(n=a.body.clone()),n.appendTo(f),g.field&&(o=i.name,p=$.isFunction(j.prefixID)?j.prefixID(d):j.prefixID||"",l.id=i.id||p+i.name,-1!=$.inArray(b,["select","combobox","autocomplete","popup"])&&(o=i.textField||i.comboboxName,i.comboboxName&&!i.id&&(l.id=(j.prefixID||"")+i.comboboxName)),-1!=$.inArray(b,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])&&(l.valueFieldID=p+i.name),a.body||(q=p+o,r=(new Date).getTime()+"_"+ ++e+"_"+i.name,n.attr($.extend({id:r,name:q},i.attr)),i.cssClass&&n.addClass(i.cssClass),i.validate&&!d.options.unSetValidateAttr&&n.attr("validate",liger.toJSON(i.validate))),$.extend(l,i.options)),i.dictionary&&(i.editor=i.editor||{},i.editor.data||(s=[],t=i.dictionary.split("|"),$(t).each(function(a,b){var c=b.split(","),d=c[0],e=c.length>=2?c[1]:c[0];s.push({id:d,value:d,text:e})}),i.editor.data=s)),i.editor&&(i.editor.options&&($.extend(l,i.editor.options),delete i.editor.options),i.editor.valueColumnName&&(l.valueField=i.editor.valueColumnName,delete i.editor.valueColumnName),i.editor.displayColumnName&&(l.textField=i.editor.displayColumnName,delete i.editor.displayColumnName),u=i.editor.p||i.editor.ext,u&&(u="function"==typeof u?u(g):u,$.extend(l,u),delete i.editor.p,delete i.editor.ext),$.extend(l,i.editor)),k?(l.host_grid=this,l.host_grid_row=g.record,l.host_grid_column=g.column):(l.host_form=this,(i.readonly||l.host_form.get("readonly"))&&(l.readonly=!0)),v=n["liger"+c](l),k&&setTimeout(function(){n.focus()},100),v},getValue:function(a,b){var d,e,f,g,h,c=b.field||b.column;if(a.getValue){if(d=a.getValue(),e=b.column?b.column.editor.type:b.field.type,c&&c.editor&&c.editor.isArrayValue&&d&&(d=d.split(";")),c&&c.editor&&c.editor.isRef&&a.getText&&(d=[d,a.getText()]),c&&c.editor&&c.editor.isRefMul&&a.getText)for(f=d.split(";"),g=a.getText().split(";"),d=[],h=0;h<f.length;h++)d.push([f[h],g[h]]);return"int"==e||"digits"==e?d=d?parseInt(d,10):0:("float"==e||"number"==e)&&(d=d?parseFloat(d):0),d}},setValue:function(a,b,c){var e,f,d=c.field||c.column;if(a.setValue){if(d&&d.editor&&d.editor.isArrayValue&&b&&(b=b.join(";")),d&&d.editor&&d.editor.isRef&&$.isArray(b)&&(b=b[0]),d&&d.editor&&d.editor.isRefMul&&$.isArray(b)){for(e=[],f=0;f<b.length;f++)e.push(b[f].length>1?b[f][1]:b[f][0]);b=e.join(";")}a.setValue(b)}},getText:function(a,b){if(b.field||b.column,a.getText){var d=a.getText();if(d)return d}},setText:function(a,b,c){var d,e,f;if(b&&a.setText)a.setText(b);else{if(d=c.field||c.column,b=a.setValue()||c.value||"",d&&d.editor&&d.editor.isRef&&$.isArray(b)&&b.length>1&&(b=b[1]),d&&d.editor&&d.editor.isRefMul&&$.isArray(b)&&b.length>1){for(e=[],f=0;f<b.length;f++)e.push(b[1]);b=e.join(";")}a.setText&&a.setText(b)}},getSelected:function(a){return a.getSelected?a.getSelected():void 0},resize:function(a,b,c,d){d.field&&(b-=2),a.resize&&a.resize(b,c)},setEnabled:function(a,b){b?a.setEnabled&&a.setEnabled():a.setDisabled&&a.setDisabled()},destroy:function(a){a.destroy&&a.destroy()}},$.extend({},f,liger.editorCreatorDefaults||{},a)):null},liger.editors={text:{control:"TextBox"},date:{control:"DateEditor",setValue:function(editor,value,editParm){"string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),editor.setValue(value)}},combobox:{control:"ComboBox"},spinner:{control:"Spinner"},checkbox:{control:"CheckBox"},checkboxlist:{control:"CheckBoxList",body:$("<div></div>"),resize:function(a,b){a.set("width",b-2)}},radiolist:{control:"RadioList",body:$("<div></div>"),resize:function(a,b){a.set("width",b-2)}},listbox:{control:"ListBox",body:$("<div></div>"),resize:function(a,b){a.set("width",b-2)}},popup:{control:"PopupEdit"},number:{control:"TextBox",options:{number:!0}},currency:{control:"TextBox",options:{currency:!0}},digits:{control:"TextBox",options:{digits:!0}},password:{control:"TextBox",password:!0}},liger.editors["string"]=liger.editors["text"],liger.editors["select"]=liger.editors["combobox"],liger.editors["int"]=liger.editors["digits"],liger.editors["float"]=liger.editors["number"],liger.editors["chk"]=liger.editors["checkbox"],liger.editors["popupedit"]=liger.editors["popup"],$.fn.live=$.fn.on?$.fn.on:$.fn.live,!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}}(jQuery);
